!function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function a(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},a.defaults,o)).expires&&(o.expires=new Date(new Date*1+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(d){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var c in o){if(o[c])r+="; "+c,!0!==o[c]&&(r+="="+o[c].split(";")[0])}return document.cookie=t+"="+n+r}}function s(e,n){if("undefined"!=typeof document){for(var a={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var d=o[s].split("="),r=d.slice(1).join("=");n||'"'!==r.charAt(0)||(r=r.slice(1,-1));try{var c=t(d[0]);if(r=(i.read||i)(r,c)||t(r),n)try{r=JSON.parse(r)}catch(f){}if(a[c]=r,e===c)break}catch(l){}}return e?a[e]:a}}return a.set=o,a.get=function(e){return s(e,!1)},a.getJSON=function(e){return s(e,!0)},a.remove=function(t,n){o(t,"",e(n,{expires:-1}))},a.defaults={},a.withConverter=n,a}(function(){})});let demwaitjquery=setInterval(function(){"undefined"!=typeof jQuery&&(clearInterval(demwaitjquery),jQuery(document).ready(democracyInit))},50);function democracyInit(e){let t=".democracy",n=e(t);if(!n.length)return;let i=".dem-screen",a=".dem-add-answer-txt",o=e(".dem-loader:first"),s,d={};d.opts=n.first().data("opts"),d.ajaxurl=d.opts.ajax_url,d.answMaxHeight=d.opts.answs_max_height,d.animSpeed=parseInt(d.opts.anim_speed),d.lineAnimSpeed=parseInt(d.opts.line_anim_speed),setTimeout(function(){let t=n.find(i).filter(":visible"),a=function(){t.each(function(){d.setHeight(e(this),1)})};t.demInitActions(1),e(window).on("resize.demsetheight",a),e(window).on("load",a),d.maxAnswLimitInit();var o=e(".dem-cache-screens");o.length>0&&o.demCacheInit()},1),e.fn.demInitActions=function(t){return this.each(function(){var n=e(this),i="data-dem-act";n.find("["+i+"]").each(function(){var t=e(this);t.attr("href",""),t.on("click",function(e){e.preventDefault(),t.blur().demDoAction(t.attr(i))})}),n.find("input[type=radio][data-dem-act=vote]").first().length&&n.find(".dem-vote-button").hide(),d.setAnswsMaxHeight(n),d.lineAnimSpeed&&n.find(".dem-fill").each(function(){var t=e(this);setTimeout(function(){t.animate({width:t.data("width")},d.lineAnimSpeed)},d.animSpeed,"linear")}),d.setHeight(n,t),n.find("form").on("submit",function(t){t.preventDefault(),e(this).find('input[name="dem_act"]').val()&&e(this).demDoAction(e(this).find('input[name="dem_act"]').val())})})},e.fn.demSetLoader=function(){var e=this;return o.length?e.closest(i).append(o.clone().css("display","table")):s=setTimeout(function(){d.demLoadingDots(e)},50),this},e.fn.demUnsetLoader=function(){return o.length?this.closest(i).find(".dem-loader").remove():clearTimeout(s),this},e.fn.demAddAnswer=function(){var t=this.first(),n=t.closest(i),o=n.find("[type=checkbox]").length>0,s=e('<input type="text" class="'+a.replace(/\./,"")+'" value="">');if(n.find(".dem-vote-button").show(),n.find("[type=radio]").each(function(){e(this).on("click",function(){t.fadeIn(300),e(a).remove()}),"radio"===e(this)[0].type&&(this.checked=!1)}),t.hide().parent("li").append(s),s.hide().fadeIn(300).focus(),o){var d=n.find(a);e('<span class="dem-add-answer-close">\xd7</span>').insertBefore(d).css("line-height",d.outerHeight()+"px").on("click",function(){var t=e(this).parent("li");t.find("input").remove(),t.find("a").fadeIn(300),e(this).remove()})}return!1},e.fn.demCollectAnsw=function(){var t=this.closest("form"),n=t.find("[type=checkbox],[type=radio],[type=text]"),i=t.find(a).val(),o=[],s=n.filter("[type=checkbox]:checked");if(s.length>0)s.each(function(){o.push(e(this).val())});else{var d=n.filter("[type=radio]:checked");d.length&&o.push(d.val())}return i&&o.push(i),(o=o.join("~"))||""},e.fn.demDoAction=function(n){var a=this.first(),o={dem_pid:a.closest(t).data("opts").pid,dem_act:n,action:"dem_ajax"};return void 0===o.dem_pid?(console.log("Poll id is not defined!"),!1):"vote"!==n||(o.answer_ids=a.demCollectAnsw(),o.answer_ids)?!!("delVoted"!==n||confirm(a.data("confirm-text")))&&("newAnswer"===n?(a.demAddAnswer(),!1):(HoldOn.open({theme:"sk-rect",message:"Enviando, Espere un momento",textColor:"white"}),e.post(d.ajaxurl,o,function(e){HoldOn.close(),swal('<div class="textSuccessFormulario">\xa1Gracias por participar en la encuesta Tips!</div>',"","success"),a.closest(i).html(e).demInitActions()}),!1)):(d.demShake(a),!1)},e.fn.demCacheShowNotice=function(e){var t=this.first(),n=t.find(".dem-youarevote").first();return"blockForVisitor"===e&&(t.find(".dem-revote-button").remove(),n=t.find(".dem-only-users").first()),t.prepend(n.show()),setTimeout(function(){n.slideUp("slow")},1e4),this},d.cacheSetAnswrs=function(t,n){var i=n.split(/,/);if(t.hasClass("voted")){var a=t.find(".dem-answers"),o=a.data("voted-class"),s=a.data("voted-txt");e.each(i,function(n,i){t.find('[data-aid="'+i+'"]').addClass(o).attr("title",function(){return s+e(this).attr("title")})}),t.find(".dem-vote-link").remove()}else{var d=t.find("[data-aid]"),r=t.find(".dem-voted-button");e.each(i,function(e,t){d.filter('[data-aid="'+t+'"]').find("input").prop("checked","checked")}),d.find("input").prop("disabled","disabled"),t.find(".dem-vote-button").remove(),r.length?r.show():(t.find('input[value="vote"]').remove(),t.find(".dem-revote-button-wrap").show())}},e.fn.demCacheInit=function(){return this.each(function(){var n=e(this),a=n.prevAll(t+":first");if(a.length||(a=n.closest(t)),!a.length){console.warn("Democracy: Main dem div not found");return}var o=a.find(i).first(),s=a.data("opts").pid,r=Cookies.get("demPoll_"+s),c="notVote"===r,f=void 0!==r&&!c,l=n.find(i+"-cache.vote").html(),h=n.find(i+"-cache.voted").html();if(l){var u=f&&h;if(o.html((u?h:l)+"<!--cache-->").removeClass("vote voted").addClass(u?"voted":"vote"),f&&d.cacheSetAnswrs(o,r),o.demInitActions(1),!c&&!f&&1==n.data("opt_logs")){var p,m=function(){clearTimeout(p)},v=function(){p=setTimeout(function(){if(!a.hasClass("checkAnswDone")){a.addClass("checkAnswDone");var t=a.find(".dem-link").first();t.demSetLoader(),e.post(d.ajaxurl,{dem_pid:a.data("opts").pid,dem_act:"getVotedIds",action:"dem_ajax"},function(e){t.demUnsetLoader(),e&&(o.html(h),d.cacheSetAnswrs(o,e),o.demInitActions(),o.demCacheShowNotice(e))})}},700)};a.on("mouseenter",v).on("mouseleave",m),a.on("click",v)}}})},d.detectRealHeight=function(e){var t=e.clone().css({height:"auto"}).insertBefore(e),n="border-box"===t.css("box-sizing")?parseInt(t.css("height")):t.height();return t.remove(),n},d.setHeight=function(t,n){var i=d.detectRealHeight(t);n?t.css({height:i}):t.css({opacity:0}).animate({height:i},d.animSpeed,function(){e(this).animate({opacity:1},1.5*d.animSpeed)})},d.setAnswsMaxHeight=function(t){if("-1"!==d.answMaxHeight&&"0"!==d.answMaxHeight&&d.answMaxHeight){var n,i=t.find(".dem-vote, .dem-answers").first(),a=parseInt(d.answMaxHeight);if(i.css({"max-height":"none","overflow-y":"visible"}),("border-box"===i.css("box-sizing")?parseInt(i.css("height")):i.height())-a>100){i.css("position","relative");var o,s=e('<span class="dem__collapser"><span class="arr"></span></span>').appendTo(i),r=function(){s.addClass("expanded").removeClass("collapsed")},c=function(){s.addClass("collapsed").removeClass("expanded")};t.data("expanded")?r():(c(),i.height(a).css("overflow-y","hidden")),s.on("mouseenter",function(){t.data("expanded")||(o=setTimeout(function(){s.trigger("click")},1e3))}).on("mouseleave",function(){clearTimeout(o)}),s.on("click",function(){if(clearTimeout(o),t.data("expanded"))c(),t.data("expanded",!1),t.height("auto"),i.stop().css("overflow-y","hidden").animate({height:a},d.animSpeed,function(){d.setHeight(t,!0)});else{r();var e=d.detectRealHeight(i);e+=7,t.data("expanded",!0),t.height("auto"),i.stop().animate({height:e},d.animSpeed,function(){d.setHeight(t,!0),i.css("overflow-y","visible")})}})}}},d.maxAnswLimitInit=function(){n.on("change",'input[type="checkbox"]',function(){var n=e(this).closest(t).data("opts").max_answs,a=e(this).closest(i).find('input[type="checkbox"]');a.filter(":checked").length>=n?a.filter(":not(:checked)").each(function(){e(this).prop("disabled",!0).closest("li").addClass("dem-disabled")}):a.each(function(){e(this).prop("disabled",!1).closest("li").removeClass("dem-disabled")})})},d.demShake=function(e){var t=e.css("position");for(t&&"static"!==t||e.css("position","relative"),t=1;2>=t;t++)e.animate({left:-10},50).animate({left:10},100).animate({left:0},50)},d.demLoadingDots=function(e){var t=e,n=t.is("input"),i=n?t.val():t.html();"..."===i.substring(i.length-3)?n?t[0].value=i.substring(0,i.length-3):t[0].innerHTML=i.substring(0,i.length-3):n?t[0].value+=".":t[0].innerHTML+=".",s=setTimeout(function(){d.demLoadingDots(t)},200)}}